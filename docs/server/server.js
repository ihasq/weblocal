"use strict";(()=>{var i={},a=()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),l=new Promise(e=>self.onmessage=e),h=BigInt(""+a()+a()+a()+a()).toString(36),P=async({request:e})=>{let t;for(;(t=a())in i;);let{body:s,cache:r,credentials:n,headers:m,integrity:p,keepalive:T,method:g,mode:E,redirect:f,referrer:u,referrerPolicy:w,url:d}=e;if(URL.parse(d)?.pathname==`/${h}`)return new Response("",{headers:{"Content-Type":"text/html"}});let M=Object.fromEntries(m.entries());return(await l).data.postMessage({code:"REQUEST",id:t,data:[s,r,n,M,p,T,g,E,f,u,w,d]}),await new Promise(o=>i[t]=o).then(([o,R,y,C])=>new Response(o,{headers:R,status:y,statusText:C}))},b=new BroadcastChannel(""),c=()=>setTimeout(()=>b.close(),3e3);l.then(({data:e})=>{let t=c();e.onmessage=({data:{code:s,id:r,data:n}})=>{switch(s){case"HEARTBEAT":{clearTimeout(t),t=c();break}default:i[r]?.(n)}},e.postMessage({code:"CONNECT",data:h})});self.addEventListener("fetch",e=>e.respondWith(P(e)));})();
