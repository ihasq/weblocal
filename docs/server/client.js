"use strict";(()=>{function u(e){return new Promise((n,t)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>t(e.error)})}function s(e,n){let t=indexedDB.open(e);t.onupgradeneeded=()=>t.result.createObjectStore(n);let r=u(t);return(i,a)=>r.then(l=>a(l.transaction(n,i).objectStore(n)))}var o;function d(){return o||(o=s("keyval-store","keyval")),o}function c(e,n=d()){return n("readonly",t=>u(t.get(e)))}(async()=>{let e=new BroadcastChannel("--weblocal-connection-signal"),n=await c("--weblocal-connection-key"),{data:t}=await new Promise(a=>window.onmessage=a),r=crypto.randomUUID(),i=new BroadcastChannel(r);navigator.serviceWorker.register(`./sw.js#${r}`),await navigator.serviceWorker.ready,location.href=location.href})();})();
